#!/usr/bin/env bash

# Run migration while answering "yes" to any question prompted.
yes "yes" | python manage.py migrate

# Run production checks
python manage.py check --deploy
{%- if cookiecutter.add_webpack.lower() == 'y' %}

# build node packages
npm install
./node_modules/.bin/webpack --config {{ cookiecutter.main_module }}/static/webpack.prod.config.js
touch webpack-stats.json
{%- endif %}

# Run Collectstatic
python manage.py collectstatic --noinput

# used by heroku after slug compilation
